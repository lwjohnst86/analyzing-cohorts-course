```{r setup}
source("preamble.R")
```

# Chapter 3: Running the statistical techniques

- Run statistics on data
    - Exercises using different techniques
    - CI vs p-value... non-significant but still important
- Extract results or numbers from model
    - Using broom
    
- Simpson's paradox? need to consider subgroup analyses (interactions), especially
for sex and ethnicity.

**Objectives:**

- Learn to run some common statistic techniques on different datasets and research
questions
- Learn how to extract the relevant results from these stats methods
- Understand why its important to not use or even look at p-values in the output
- Know how to understand and interpret the results (we'll get to knowing what
exactly is most useful to present and show for higher impact)
- Importance of examining multiple levels of adjustment (unadjusted, minimally,
fully), and how this can inform what is going on in the relationship.
- Knowing how to choose/decide on what variables to adjust for

**Lessons to achieve objectives:**

- Split chapter up by analysis of cohort type?
- Common statistical techniques:
    - mixed effect modeling
    - cox proportional hazard models
    - linear regression
    - logistic regression
    - Poisson regression
    - Conditional logistic regression (for nested case-cohort designs)
- Using broom, what to take from broom, conf.int
- Quick overview of the unreliability of p-values, the danger of using them to
inform clinical and public health policy (find examples?)
- Interpreting OR, RR, IRR (incidence risk ratio), and other forms of estimates
- What it means to "adjust" for confounders? What is a confounder? (probably explained 
in one of the other epi courses, so be brief here).
    - What does adjustment mean when time is included? Gets trickier. This is why
    cross-sectional analyses are simpler analytically.

**Exercises to reinforce learning:**

- NE: Compare using logistic regression vs mixed effects for prospective cohort...
see how standard errors get inflated because of the impact that including time has.
- NE: Run model without adjusting, with adjusting, and lastly with adjusting for an
inappropriate variable (how that changes things)
- NE: Use model information criterion methods, identify which model is "best fit"
- MCQ/text: Describe different impact of adjusting, etc. including collider variables.
How does that change the interpretation? How can this influence the health impacts
if inappropriately published?
- NE: Change variables scaling or transform them to see how the estimates change...
what does that mean for interpretation?
- NE: Maybe exercise where some observations are removed and show how that impacts
the p-value...? to highlight how unreliable it is?

### Exercise 3: A simple logistic regression
NE: Run logistic regression on data. Get relevant information from the model.
Logistic regression is often used when studying how factors associate with disease
(since disease state is usually binary: they have it or they don't)


```{r}
load("datasets/nickel.rda")
glm()
```

### Exercise 4:
NE: Run Mixed effects models on data. Get relevant information from the model. 

### Exercise:
- MCQ: here is a research question, here is the result of an analysis
(non-significant but wide CI that is protective). which is more appropriate
interpretation of the result:
    - There is no association.
    - while non-significant, this effect 

## Lesson 2: Logistic regression, OR, and RR
### Exercise 3: MCQ Multiple logistic regression interpretation
