```{r}
library(dplyr)
library(ggplot2)
library(tidyr)
load("datasets/framingham.rda")
load("datasets/nickel.rda")
load("datasets/dietchd.rda")
```

# Chapter 4: Presentation your results

- Backtransform based on what is most meaningful for presenting
- Presenting the results in a plot or table
- Danger of not showing all results or proper cautious interpretation, because
lives are at risk.

**Objectives**

- Give careful thought into how to best show results in a understandable and
impactful way for public health professionals and clinicians.
- Emphasize figures over tables, but know when to use either.
- Be cautious in interpreting "non-significant" findings, since they could also
have meaningful clinical implications.
    - Especially with "causal" language

**Lessons to achieve objectives:**

- Highlighting uncertainty and magnitude of results over "statistical significance"
- What to show when using tables
    - Disparate estimates from models or results (e.g. showing results from full 
    model, that includes both discrete and continuous exposures)
- Backtransforming for maximal interpretation and meaning
- When to use stronger causal language
    - Often argued that only Randomized Controlled Trials or animal/cell experiments 
    can use causal language, but that isn't always true.
    - Bradford Hill criteria (e.g. being smoking and lung cancer)

**Exercises to reinforce learning:**

- MCQ/text: Which of these choices is most appropriate for using causal language.
    - ...
- MCQ/text: A finding shows that a exposure has a OR of 0.80 (0.59, 1.01 95% CI).
The paper says the association was non-significant and don't further discuss it.
Without knowing the specifics of the actual analysis, which choices would suggest
the paper should have discussed the association more {{wording}}:
    - effect of type of milk on premature infant mortality
    - others, fill out...
    
### Exercise: Backtransforming of results

```{r}
results %>% 
    # If exposures were logged... interpreted as percent difference
    mutate_at(vars(estimate, conf.low, conf.high), funs(exp(. - 1) * 100))
# TODO: add others transformations.
```


### Exercise: Creating a markdown table of the results

```{r}
results %>% 
    mutate_at(vars(estimate, conf.low, conf.high), funs(round(., 2))) %>% 
    mutate(EstCI = stringr::str_c(estimate, " (", conf.low, ", ", conf.high, ")")) %>% 
    select(Exposures = terms, `Estimate (95% CI)` = EstCI) %>% 
    knitr::kable(caption = "Regression results of exposures on the outcome. {{expand}}")
```


### Exercise: estimate and CI plot

```{r}
# TODO: Use previous results (or just provide the result dataframe so they can start plotting)
results %>% 
    ggplot(aes(y = models, x = estimate, xmin = conf.low, xmax = conf.high)) +
    geom_errorbarh(aes(height = 0.2)) +
    facet_grid( ~ outcomes, scales = "free")
```

## Lesson 2: Using statistics is easy, making *meaning* is hard

- The importance of choosing the test most appropriate to the data, to the
research design, and to the research questions.
- Depending on the statistical test, how you transform your data can drastically
change, for better or worse, how the results are interpreted and presented.
- Most of the time, your target audience for your results/analysis of cohort
studies is people in public health or government or clinicians... so you really
need to make sure that your results are *understandable* to *them*, not to other
data scientists or statisticians or epidemiologists (though you also need to 
target them).

### Exercise 1: Transforming, and then what?
MCQ/text: 
### Exercise 2: 
NE: You have a 
