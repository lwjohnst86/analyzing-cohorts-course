```{r}
source("preamble.R")
```

# Chapter 4: Presentation your results

- Backtransform based on what is most meaningful for presenting
- Presenting the results in a plot or table
- Danger of not showing all results or proper cautious interpretation, because
lives are at risk.

**Objectives**

- Give careful thought into how to best show results in a understandable and
impactful way for public health professionals and clinicians.
- Emphasize figures over tables, but know when to use either.
- Be cautious in interpreting "non-significant" findings, since they could also
have meaningful clinical implications.
- Use cautious language when presenting results
    - Especially with "causal" language

**Lessons to achieve objectives:**

- Highlighting uncertainty and magnitude of results over "statistical significance"
- Types of backtransformation and impact on interpretation. (Should this be in
chapter 3?)
- Table or figure? When to use either
    - Above all, try to use a figure. They tend to show results the best,
    quickest, and are more intuitive/understandable then tables.
    - But not all results work in a figure.
- What to show when using tables
    - Disparate estimates from models or results (e.g. showing results from full 
    model, that includes both discrete and continuous exposures)
- Backtransforming for maximal interpretation and meaning
- When to use stronger causal language
    - Depending on magnitude of finding, can use stronger causal language.
    - e.g. with smoking and lung cancer
    - Often argued that only Randomized Controlled Trials or animal/cell experiments 
    can use causal language, but that isn't always true.
    - Bradford Hill criteria (e.g. being smoking and lung cancer)

**Exercises to reinforce learning:**

- MCQ/text: Which is the most appropriate language to use when describing these
results:
    - {large effect size} {strong causal language}
    - .. etc. fill out later.
- MCQ/text: A finding shows that a exposure has a OR of 0.80 (0.59, 1.01 95% CI).
The paper says the association was non-significant and don't further discuss it.
Without knowing the specifics of the actual analysis, which choices would suggest
the paper should have discussed the association more {{wording}}:
    - effect of type of milk (or feeding) on premature infant mortality
    - others, fill out...
- MCQ/text: Which results/analyses would be best as a table or as a figure?
    - ...
    
### Exercise: Create a table of the results

```{r}
results %>% 
    mutate_at(vars(estimate, conf.low, conf.high), round, digits = 1) %>% 
    mutate(EstCI = glue::glue("{estimate} ({conf.low}, {conf.high})")) %>% # or stringr::str_c or paste0
    select(Model, Predictors = terms, `Estimate (95% CI)` = EstCI) %>% 
    knitr::kable(caption = "Caption here") # or pander
```

Notice how the p-value is not included here. When trying to communicate results
that can have health impacts, its important to focus on the important parts ... 
the magnitude of association, not on some arbitrary p-value threshold. The
magnitude is more informative, especially for clinicians and public health
practitioners.
    
### Exercise: Backtransforming of results

```{r}
results %>% 
    # If exposures were logged... interpreted as percent difference
    mutate_at(vars(estimate, conf.low, conf.high), funs(exp(. - 1) * 100))
# TODO: add others transformations.
```


### Exercise: Creating a markdown table of the results

```{r}
results %>% 
    mutate_at(vars(estimate, conf.low, conf.high), funs(round(., 2))) %>% 
    mutate(EstCI = stringr::str_c(estimate, " (", conf.low, ", ", conf.high, ")")) %>% 
    select(Exposures = terms, `Estimate (95% CI)` = EstCI) %>% 
    knitr::kable(caption = "Regression results of exposures on the outcome. {{expand}}")
```

### Exercise: estimate and CI plot

```{r}
# TODO: Use previous results (or just provide the result dataframe so they can start plotting)
results %>% 
    ggplot(aes(y = models, x = estimate, xmin = conf.low, xmax = conf.high)) +
    geom_errorbarh(aes(height = 0.2)) +
    facet_grid( ~ outcomes, scales = "free")
```

## Lesson 2: Using statistics is easy, making *meaning* is hard

- The importance of choosing the test most appropriate to the data, to the
research design, and to the research questions.
- Depending on the statistical test, how you transform your data can drastically
change, for better or worse, how the results are interpreted and presented.
- Most of the time, your target audience for your results/analysis of cohort
studies is people in public health or government or clinicians... so you really
need to make sure that your results are *understandable* to *them*, not to other
data scientists or statisticians or epidemiologists (though you also need to 
target them).

### Exercise 1: Transforming, and then what?
MCQ/text: 
### Exercise 2: 
NE: You have a 
