```{r}
library(dplyr)
load("datasets/framingham.rda")
load("datasets/nickel.rda")
load("datasets/dietchd.rda")
```

# Chapter 1: Introduction to cohorts and types of research questions

**Objectives:**

- Know that analyzing cohorts is just as much about the process/workflow as it
is about the specific tools/statistics to use.
- Recognize the type of cohort design from the data
- Know which research questions can and cannot be asked of the given data
- Have a general understand of which statistical tests to use for which data and
that the test will dictate how the data should look.
- Know where to look and what resources to use if you can't find the statistical
or analytical techniques needed to analyze the data.

**Lessons to achieve objectives:**

- Purpose of cohort studies ... why have them and what do they provide.
- Intro to some jargon:
    - cohorts (all participants share a common characteristic), types, outcomes,
    predictors/exposure, risk factors (fill out as I go along)
- Types of cohort designs:
    - Prospective (no exposure, no disease), retrospective (exposure, but no
    disease), cross-sectional analysis of cohort (based on type of data
    available), nested case-control (won't necessarily be teaching how to
    analyze all these, will teach about the process for working with this type
    of data and what is important to present).
- General look of data:
    - Show how the data looks:
        - baseline visit with disease status followup (time to disease, or age
        at diagnosis, or age at death, etc)
        - multiple data collection waves (ID and Wave columns)
        - Data will look very similar between prospective vs retrospective, the
        difference being how the data was collected... need to check what the
        variables mean, so need to refer to the documentation.
    - State assumptions first about the data (e.g. data already collected), this
    is not a course on how to conduct and collect cohort data.
- research questions able to be asked from data and impact on stats
    - retrospective, can ask questions like:
        - 
- Sources of bias (not at this stage) TODO: move to analysis or wrangling chapter?
- Incidence vs prevalence
- odds ratio, relative risk, incidence rate ratio
    - risk estimate of some type, for instance of diseases that are not binary
- Introduction to datasets we will use throughout

**Exercises outline:**

- MCQ/text: Series of examples of study designs and data collection protocols...
identify which is prospective, retrospective, etc.
- NE: (simple one) Extract the outcome and exposure from the {n} datasets
- NE: Quickly look over data (simple, like head or something). Type out in order 
which is prospective, which is retrospective, etc.
- MCQ/text: List types of epidemiology studies... which are cohorts
- MCQ/text: Limitation of retrospective over prospective (from an analytic and
interpretation point of view).
- MCQ/text: General limitations of prospective cohorts (again from analytic or
interpretation view)
- 

## Lesson 1: Cohort
- Types of cohort studies
- Prevalence vs incidence

### Exercise: 
MCQ: Scenarios to highlight which is prevalence, which is incidence.
Or question about which data type/study type is retrospective (nickel data) vs
prospective (framingham/diet).

### Exercise: Prevalence vs incidence .. maybe not
NE: Calculate prevalent cases and incident cases?
(Maybe a simple )
First wrangle, then calculate.

## Lesson 2: Typical analyses used
- Statistics (more of a review, expect them to know what they are doing):
    - Logistic regression
    - Mixed effects modelling
- Choice of statistic is dependent on question asked.
- In general, cohorts try to address questions such as:
    - "what type of exposures increase the risk of disease?"
    - "how much and how long do individuals need to be exposured to a risk factor
    to develop the disease?"
    - "For those that have a disease, how do they differ from those without?"
    - "Those that have more exposure over time, are they more likely to develop a disease?"
- These questions generally require some type of regression modelling in order to
estimate magnitude of association and the uncertainty around that association.

### Exercise 1: Here's data and a question, which test to use?

Text? or MCQ?: Show example data. Which statistics to use for this?
Or maybe choose which stats belongs with which data type? Or which question
belongs with which data and statistic?

### Exercise 2: First steps, exploration
NE: Run summary statistics on those with the disease and those without.

```{r}
library(dplyr)
library(broom)
load("datasets/nickel.rda")
nickel %>% 
    group_by(icd) %>% 
    summarize(mean = mean(exposure), sd = sd(exposure))

load("datasets/framingham.rda")
framingham %>% 
    group_by(period, cvd) %>% 
    # TODO: choose other variables.
    summarize(meanChol = mean(totchol, na.rm = TRUE), meanBMI = mean(bmi, na.rm = TRUE))
```

Note:
We can already see that those who had a cancer were also exposed the most in the
`nickel` dataset.

## Lesson 3: Questions that can be asked of specific data

- Workflow steps:
    1. Decide on specific research question and likely statistics to use.

### Exercise 1:
Text? MCQ?: Which research question belongs with which dataset?

## Lesson 4: Exploration continued, visually ...?
### Exercise 1:
### Exercise 2:
### Exercise 3:
