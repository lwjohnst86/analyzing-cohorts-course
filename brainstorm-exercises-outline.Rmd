# Outline

(check if lme4 and rev dep packages have datasets I can use)
- no lme4 does not have it. nor does geepack. Will check rev dep...

- Datasets:
    - Data in Epi package:
        - `diet` subsample from cohort on incidence of CHD
        - `nickel` cohort of nickel smelters with death (ICDs 162, 163 are lung
        cancer and 160 is nasal cancer) (may need to use the `ewrates` data as a comparison group)

- Chapter 1: Introduction to cohorts and analyzing
    - Lessons: Workflow, types of cohorts, typical analyses
    - Dataset:
- Chapter 2: Cross-sectional analysis of cohort dataset (this could also be
retrospective)
    - Lessons: Typical feature (how to identify), typical analyses, OR vs RR,
    interpretation (cautions, etc), strengths, weaknesses
    - Dataset: PROMISE? IRAS?
- Chapter 3: Retrospective cohort/case-control
    - Lessons: Strengths, weaknesses, feature, exposed/non-exposed
    - Dataset: Cervical cancer (STI vs cancer, etc)
        - Link: https://archive.ics.uci.edu/ml/datasets/Cervical+cancer+%28Risk+Factors%29
- Chapter 4: Prospective cohort (nested case-cohort?)
    - Lessons: Time to event, panel study
    - Dataset: "Panel" Framingham teaching dataset; 
- Chapter 5: 
    - Lessons:
    - Dataset:
    
Ideas:
    - MCQ: here is a research question, here is the result of an analysis
    (non-significant but wide CI that is protective). which is more appropriate
    interpretation of the result:
        - There is no association.
        - while non-significant, this effect 

# Chapter 1: Introduction to analyzing cohorts
- State assumptions first about the data etc? (e.g. data already collected)
## Lesson 1: What is a cohort study?
- Types of cohort studies
- Prevalence vs incidence
### Exercise 1: 
MCQ: Scenarios to highlight which is prevalence, which is incidence.
Or question about which data type/study type is retrospective (nickel data) vs
prospective (framingham/diet).

### Exercise 2: 
NE: Calculate prevalent cases and incident cases?
(Maybe a simple )
First wrangle, then calculate.
### Exercise 3:

## Lesson 2: Typical analyses used
- Statistics (more of a review, expect them to know what they are doing):
    - Logistic regression
    - Mixed effects modelling
- Choice of statistic is dependent on question asked.
- In general, cohorts try to address questions such as:
    - "what type of exposures increase the risk of disease?"
    - "how much and how long do individuals need to be exposured to a risk factor
    to develop the disease?"
    - "For those that have a disease, how do they differ from those without?"
    - "Those that have more exposure over time, are they more likely to develop a disease?"
- These questions generally require some type of regression modelling in order to
estimate magnitude of association and the uncertainty around that association.

### Exercise 1: 
Text? or MCQ?: Show example data. Which statistics to use for this?
Or maybe choose which stats belongs with which data type? Or which question
belongs with which data and statistic?

### Exercise 2: 
NE: Run summary statistics on those with the disease and those without.

```{r}
library(Epi)
library(dplyr)
library(broom)
data("nickel")
nickel %>% 
    filter(icd %in% c(0, 160, 162, 163)) %>% 
    group_by(icd) %>% 
    summarize(mean = mean(exposure), sd = sd(exposure))

load("datasets/framingham.rda")
framingham %>% 
    group_by(period, cvd) %>% 
    # TODO: choose other variables.
    summarize(meanChol = mean(totchol, na.rm = TRUE), meanBMI = mean(bmi, na.rm = TRUE))
```

We can already see that those who had a cancer were also exposed the most in the
`nickel` dataset.

### Exercise 3:
NE: Run logistic regression on data. Get relevant information from the model. 

```{r}
glm()
```

### Exercise 4:
NE: Run Mixed effects models on data. Get relevant information from the model. 

## Lesson 3: Common workflow of analysis

- Most analyses follow a common workflow:
    - Ask the question and choose the statistical technique
    - Wrangle the data into the appropriate format
    - Carefully decide on potential confounders to adjust for in model (or stratified)
    - Apply models to each question 
    - Extract relevant information

- Workflow steps:
    1. Decide on specific research question and likely statistics to use.
    2. Wrangle data into necessary form for use by statistics (choose variables,
    filter, transform) (long vs wide, etc).
    3. Apply stats/models to each research question.
    4. Extract necessary information from the model output.
    5. Backtransform/transform the results if necessary (for interpretation).
    6. Show results preferably using figure, if appropriate, otherwise table.

### Exercise 1:
Text? MCQ?: Which research question belongs with which dataset?

### Exercise 2:
NE: 

### Exercise 3:

### Exercise 4:

### Exercise 5?:

## Lesson 4:
### Exercise 1:
### Exercise 2:
### Exercise 3:
# Chapter 2:
## Lesson 1:
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 2:
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 3:
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 4:
### Exercise 1:
### Exercise 2:
### Exercise 3:
# Chapter 3: Retrospective cohort/case-control
## Lesson 1: Features of retrospective cohorts, limitations and strengths 
### Exercise 1: NE Occurence of disease (if applicable)
### Exercise 2: MCQ Interpretations (with causation)
### Exercise 3: MCQ Which (sim/fake) dataset is retrospective?
## Lesson 2: Logistic regression, OR, and RR
### Exercise 1: NE Calculate OR (simulated data) and RR. Compare.

```{r}
```

### Exercise 2: MCQ Interpretation of OR vs RR vs probability.
### Exercise 3: MCQ Multiple logistic regression interpretation
## Lesson 3: Unadjusted vs adjusted
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 4: Interaction?
### Exercise 1:
### Exercise 2:
### Exercise 3:
# Chapter 4: Prospective analysis
## Lesson 1: Features
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 2: 
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 3: 
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 4:
### Exercise 1:
### Exercise 2:
### Exercise 3:
# Chapter 5:
## Lesson 1:
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 2:
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 3:
### Exercise 1:
### Exercise 2:
### Exercise 3:
## Lesson 4:
### Exercise 1:
### Exercise 2:
### Exercise 3:
